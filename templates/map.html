{% load static %}
<!DOCTYPE html>
<html>
  <head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js"></script>
    <link
    href="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css"
    rel="stylesheet"
  />
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.0/mapbox-gl-directions.js"></script>
  <link
    rel="stylesheet"
    href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.0/mapbox-gl-directions.css"
    type="text/css"
  />
    
    
    <link rel="stylesheet" href="{% static 'css/mapPage.css' %}">
    <title>Sample Django Map Project</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

  </head>
  <body>

    <header>
        <h1>
            <a href="" class="home">
                <div class="logo one">Ascent+</div>
                <div class="logo two">Interactive</div>
            </a>
        </h1>
        <div class="pages">
            <a href="" class="page-link">Home</a>
            <a href="#" class="page-link">Map</a>
            <a href="#" class="page-link">About</a>
        </div>
    </header>
    <div style="width: 100%; height: 80%">
      <div id="map" style="width: 100%; height: 800px"></div>
    </div>
    

    <div id="menu">
      <input
        id="satellite-v9"
        type="radio"
        name="rtoggle"
        value="satellite"
        checked="checked"
      />
      <!-- See a list of Mapbox-hosted public styles at -->
      <!-- https://docs.mapbox.com/api/maps/styles/#mapbox-styles -->
      <label for="satellite-v9">satellite</label>
      <input id="light-v10" type="radio" name="rtoggle" value="light" />
      <label for="light-v10">light</label>
      <input id="dark-v10" type="radio" name="rtoggle" value="dark" />
      <label for="dark-v10">dark</label>
      <input id="streets-v11" type="radio" name="rtoggle" value="streets" />
      <label for="streets-v11">streets</label>
    </div>

    <script>
      mapboxgl.accessToken =
        "pk.eyJ1IjoiaGFtc2llIiwiYSI6ImNsODN4aWdmcjBhNHEzcGw4ZXYxMHcxaXkifQ.67o9saEURWg3rF02gZxGKg";
      const map = new mapboxgl.Map({
        container: "map", // container ID
        style: "mapbox://styles/mapbox/streets-v11", // style URL
        center: [-73.93, 40.73], // starting position [lng, lat]
        zoom: 11, // starting zoom
        projection: "globe", // display the map as a 3D globe
      });

      const layerList = document.getElementById("menu");
      const inputs = layerList.getElementsByTagName("input");

      for (const input of inputs) {
        input.onclick = (layer) => {
          const layerId = layer.target.id;
          map.setStyle("mapbox://styles/mapbox/" + layerId);
        };
      }

      map.on("style.load", () => {
        map.setFog({
          color: "rgb(186, 210, 235)", // Lower atmosphere
          "high-color": "rgb(36, 92, 223)", // Upper atmosphere
          "horizon-blend": 0.02, // Atmosphere thickness (default 0.2 at low zooms)
          "space-color": "rgb(11, 11, 25)", // Background color
          "star-intensity": 0.6, // Background star brightness (default 0.35 at low zoooms )
        });
      });
    </script>

    <button onclick="showmarker()">Grocery Stores</button>

    <script>
      function showmarker()
      {
        {% for address in addresses %} var marker = new
                      mapboxgl.Marker().setLngLat([{{ address.long }}, {{ address.lat }}]).addTo(map); {% endfor %}

      };
    </script>
  </body>
</html>
